<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
      integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="../../css/main.css" />
    <link rel="stylesheet" href="../../css/ecampus.css" />
    <link rel="stylesheet" href="./brainstorming.css" />
    <title>Communication</title>
  </head>
  <body class="homePageBody">
    <header>
      <nav>
        <div class="nav_top">
          <a href="../ecampus.html" class="current"
            ><img src="../../img.video/logoEcampus.svg" alt=""
          /></a>
          <a href="../notes.html"
            ><img src="../../img.video/note-removebg-preview.png" alt=""
          /></a>
        </div>
        <div class="nav_bottom">
          <a href=""><i class="fa-solid fa-question"></i></a>
          <a href=""><i class="fa-solid fa-arrow-right-from-bracket"></i></a>
        </div>
      </nav>
    </header>

    <main>
      <article class="ecampusContainer">
        <style>
          /* Basic styling for layout */
          .top-section {
            display: flex;
          }
          .instruction-cell,
          .mockup-cell,
          .css-code-cell {
            width: 33%;
            /* Additional styling */
          }
          .bottom-section {
            /* Styling for output section */
          }
        </style>
        <div class="top-section">
          <div class="instruction-cell">Change font color to black</div>
          <div class="mockup-cell">
            <img src="path/to/mockup.jpg" alt="Mockup" />
          </div>
          <textarea id="css-input" class="css-code-cell"></textarea>
        </div>
        <iframe id="output-iframe" class="bottom-section"></iframe>
        <button id="confirm-btn">Confirm</button>
        <div id="tip-section"></div>
      </article>
    </main>

    <script>
      document
        .getElementById('confirm-btn')
        .addEventListener('click', function () {
          const cssCode = document.getElementById('css-input').value;
          const sanitizedCss = sanitizeCss(cssCode); // Implement sanitizeCss to parse and clean the CSS
          const iframe = document.getElementById('output-iframe');
          const iframeDoc =
            iframe.contentDocument || iframe.contentWindow.document;

          // Clear previous styles
          iframeDoc.head.innerHTML = '';
          iframeDoc.body.innerHTML =
            '<div id="output">This text color should change.</div>';

          // Apply new styles
          const styleTag = document.createElement('style');
          styleTag.type = 'text/css';
          styleTag.innerHTML = sanitizedCss;
          iframeDoc.head.appendChild(styleTag);
        });

      function sanitizeCss(cssCode) {
        // Parse and sanitize the CSS code here
        // For example, only allow certain properties to be modified
        return cssCode; // Return the sanitized CSS
      }

      document
        .getElementById('confirm-btn')
        .addEventListener('click', function () {
          const outputColor = getComputedStyle(
            document.getElementById('output')
          ).color;
          if (outputColor === 'rgb(0, 0, 0)') {
            // Check if color is black
            alert('Correct!');
          } else {
            document.getElementById('tip-section').innerText =
              'Tip: The font color should be black.';
          }
        });
    </script>
    <script src="../../js/index.js"></script>
  </body>
</html>
